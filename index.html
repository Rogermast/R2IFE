<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>R2 Translate (M√≥vil)</title>
  <style>
    :root {
      --bg: #0f0f1a;
      --card: #1a1a2e;
      --accent: #00f6ff;
      --text: #ffffff;
      --sub: #a0a0c0;
      --error: #ff4757;
      --success: #2ed573;
    }
    * { 
      box-sizing: border-box; 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding: 20px 10px;
    }
    .container {
      width: 100%;
      max-width: 600px;
      background: var(--card);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 0 0 20px rgba(0,246,255,.25);
    }
    h1 {
      text-align: center;
      margin-top: 0;
      color: var(--accent);
      letter-spacing: 2px;
      font-size: 1.8rem;
    }
    .tabs {
      display: flex;
      justify-content: space-around;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(160, 160, 192, 0.3);
      padding-bottom: 10px;
    }
    .tabs button {
      background: transparent;
      border: none;
      color: var(--sub);
      padding: 8px 15px;
      border-radius: 30px;
      cursor: pointer;
      transition: .3s;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .tabs button.active,
    .tabs button:hover {
      color: var(--accent);
      border-bottom: 2px solid var(--accent);
    }
    textarea {
      width: 100%;
      height: 120px;
      border-radius: 10px;
      border: none;
      padding: 15px;
      font-size: 16px;
      resize: none;
      background: #101020;
      color: var(--text);
    }
    .controls {
      margin-top: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    select, button {
      padding: 10px 15px;
      border-radius: 8px;
      border: none;
      background: var(--accent);
      color: var(--bg);
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 246, 255, 0.3);
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    #output {
      margin-top: 20px;
      background: #101020;
      padding: 15px;
      border-radius: 10px;
      min-height: 100px;
      white-space: pre-wrap;
      position: relative;
    }
    #fileInput { display: none; }
    .icon-btn {
      background: none;
      border: 2px solid var(--accent);
      color: var(--accent);
      padding: 10px;
      border-radius: 50%;
      font-size: 20px;
      margin-left: 10px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 50px;
    }
    .icon-btn:hover {
      transform: scale(1.1);
    }
    .hidden { display: none; }
    .voice-mode, .image-mode {
      text-align: center;
      padding: 20px;
    }
    .voice-mode p, .image-mode p {
      margin-bottom: 20px;
    }
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: 10px;
      color: white;
      font-weight: 500;
      z-index: 1000;
      transform: translateX(150%);
      transition: transform 0.3s ease;
    }
    .notification.show {
      transform: translateX(0);
    }
    .notification.error { background-color: var(--error); }
    .notification.success { background-color: var(--success); }
    .notification.info { background-color: var(--accent); }
    .loader {
      border: 3px solid rgba(0, 246, 255, 0.2);
      border-radius: 50%;
      border-top: 3px solid var(--accent);
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-right: 10px;
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .copy-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      border: 1px solid var(--sub);
      color: var(--sub);
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
    }
    .copy-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }
    .lang-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .swap-btn {
      background: transparent;
      border: none;
      color: var(--accent);
      font-size: 20px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .swap-btn:hover { transform: rotate(180deg); }
    .preview-image {
      max-width: 100%;
      max-height: 200px;
      margin-top: 15px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>R2 Translate</h1>
    <div class="tabs">
      <button class="active" data-mode="text">Texto</button>
      <button data-mode="voice">Voz</button>
      <button data-mode="image">Imagen</button>
    </div>

    <!-- Texto -->
    <div id="mode-text">
      <textarea id="inputText" placeholder="Escribe aqu√≠..."></textarea>
    </div>

    <!-- Voz -->
    <div id="mode-voice" class="hidden">
      <div class="voice-mode">
        <p>Presiona el micr√≥fono y habla</p>
        <button class="icon-btn" id="voiceBtn">üé§</button>
        <div id="voiceStatus" class="hidden" style="margin-top: 15px;">
          <div class="loader"></div>
          <span>Escuchando...</span>
        </div>
      </div>
    </div>

    <!-- Imagen -->
    <div id="mode-image" class="hidden">
      <div class="image-mode">
        <p>Sube una imagen con texto</p>
        <button class="icon-btn" id="imageBtn">üì∑</button>
        <input type="file" id="fileInput" accept="image/*">
        <div id="imageStatus" class="hidden" style="margin-top: 15px;">
          <div class="loader"></div>
          <span>Procesando imagen...</span>
        </div>
        <div id="imagePreview"></div>
      </div>
    </div>

    <div class="controls">
      <div class="lang-controls">
        <select id="sourceLang">
          <option value="en">Ingl√©s</option>
          <option value="fr">Franc√©s</option>
          <option value="es">Espa√±ol</option>
        </select>
        <button class="swap-btn" id="swapBtn">‚áÑ</button>
        <select id="targetLang">
          <option value="es">Espa√±ol</option>
          <option value="en">Ingl√©s</option>
          <option value="fr">Franc√©s</option>
        </select>
      </div>
      <button id="translateBtn">Traducir</button>
    </div>

    <h3>Traducci√≥n:</h3>
    <div id="output">
      <span style="color: var(--sub);">La traducci√≥n aparecer√° aqu√≠...</span>
    </div>
  </div>

  <!-- Notification container -->
  <div id="notification" class="notification"></div>

  <!-- Librer√≠as -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
  <script>
    // =================================================================
    // === DICCIONARIO INTEGRADO DIRECTAMENTE EN EL C√ìDIGO ===
    // =================================================================
    const dictionary = {
      "en_to_es": {
        "a": "un", "about": "acerca de", "above": "sobre", "after": "despu√©s", "again": "de nuevo", "against": "contra", "all": "todo", "am": "soy", "an": "un", "and": "y", "any": "alg√∫n", "are": "eres/son", "as": "como", "at": "en", "be": "ser/estar", "because": "porque", "been": "estado", "before": "antes", "being": "siendo", "below": "debajo", "between": "entre", "both": "ambos", "but": "pero", "by": "por", "can": "poder", "did": "hiciste", "do": "hacer", "does": "hace", "doing": "haciendo", "down": "abajo", "during": "durante", "each": "cada", "few": "pocos", "for": "para", "from": "de", "had": "tuvo", "has": "tiene", "have": "tener", "having": "teniendo", "he": "√©l", "her": "ella/su", "here": "aqu√≠", "hers": "suyo (de ella)", "him": "√©l", "his": "su (de √©l)", "how": "c√≥mo", "i": "yo", "if": "si", "in": "en", "into": "dentro de", "is": "es", "it": "ello/eso", "its": "su (de ello)", "just": "justo/s√≥lo", "me": "m√≠", "more": "m√°s", "most": "m√°s", "much": "mucho", "must": "deber", "my": "mi", "mine": "m√≠o", "no": "no", "nor": "ni", "not": "no", "now": "ahora", "of": "de", "off": "apagado", "on": "encendido/en", "once": "una vez", "only": "s√≥lo", "or": "o", "other": "otro", "our": "nuestro", "ours": "nuestro", "out": "fuera", "over": "sobre", "own": "propio", "same": "mismo", "she": "ella", "should": "deber√≠a", "so": "as√≠/entonces", "some": "alg√∫n", "such": "tal", "than": "que", "that": "ese/eso", "the": "el/la/los/las", "their": "su (de ellos)", "theirs": "suyo (de ellos)", "them": "ellos/les", "then": "entonces", "there": "all√≠", "these": "estos", "they": "ellos", "this": "este", "those": "aquellos", "through": "a trav√©s de", "to": "a", "too": "tambi√©n", "under": "bajo", "up": "arriba", "very": "muy", "was": "era/fue", "we": "nosotros", "were": "√©ramos/fuimos", "what": "qu√©", "when": "cu√°ndo", "where": "d√≥nde", "which": "cu√°l", "while": "mientras", "who": "qui√©n", "whom": "a qui√©n", "why": "por qu√©", "will": "voluntad/futuro", "with": "con", "you": "t√∫/ustedes", "your": "tu/su", "yours": "tuyo/suyo", "hello": "hola", "goodbye": "adi√≥s", "please": "por favor", "thank you": "gracias", "yes": "s√≠", "no": "no", "i don't understand": "no entiendo", "help": "ayuda", "food": "comida", "water": "agua", "house": "casa", "friend": "amigo", "family": "familia", "love": "amor", "peace": "paz", "war": "guerra", "computer": "computadora", "code": "c√≥digo", "error": "error", "success": "√©xito", "problem": "problema", "solution": "soluci√≥n", "open": "abrir", "close": "cerrar", "read": "leer", "write": "escribir", "translate": "traducir", "language": "idioma", "good morning": "buenos d√≠as", "good night": "buenas noches", "how are you": "c√≥mo est√°s", "what is your name": "c√≥mo te llamas", "where is the bathroom": "d√≥nde est√° el ba√±o", "can you help me": "puedes ayudarme", "how much does it cost": "cu√°nto cuesta", "today": "hoy", "tomorrow": "ma√±ana", "yesterday": "ayer", "time": "tiempo", "day": "d√≠a", "night": "noche", "sun": "sol", "moon": "luna", "star": "estrella", "book": "libro", "work": "trabajo", "car": "coche", "street": "calle", "city": "ciudad", "country": "pa√≠s", "money": "dinero", "happy": "feliz", "sad": "triste", "big": "grande", "small": "peque√±o", "hot": "caliente", "cold": "fr√≠o", "new": "nuevo", "old": "viejo", "good": "bueno", "bad": "malo", "easy": "f√°cil", "difficult": "dif√≠cil", "right": "derecho/correcto", "left": "izquierda", "near": "cerca", "far": "lejos", "fast": "r√°pido", "slow": "lento", "always": "siempre", "never": "nunca", "sometimes": "a veces", "think": "pensar", "know": "saber", "want": "querer", "need": "necesitar", "go": "ir", "come": "venir", "see": "ver", "look": "mirar", "listen": "escuchar", "speak": "hablar", "tell": "decir", "give": "dar", "take": "tomar", "put": "poner", "get": "conseguir", "make": "hacer", "find": "encontrar", "try": "intentar"
      },
      "fr_to_es": {
        "bonjour": "hola", "au revoir": "adi√≥s", "s'il vous pla√Æt": "por favor", "merci": "gracias", "oui": "s√≠", "non": "no", "je ne comprends pas": "no entiendo", "aide": "ayuda", "nourriture": "comida", "eau": "agua", "maison": "casa", "ami": "amigo", "famille": "familia", "amour": "amor", "paix": "paz", "guerre": "guerra", "ordinateur": "ordenador", "code": "c√≥digo", "erreur": "error", "succ√®s": "√©xito", "probl√®me": "problema", "solution": "soluci√≥n", "ouvrir": "abrir", "fermer": "cerrar", "lire": "leer", "√©crire": "escribir", "traduire": "traducir", "langue": "idioma", "bonne nuit": "buenas noches", "comment allez-vous": "c√≥mo est√°s", "quel est ton nom": "c√≥mo te llamas", "o√π sont les toilettes": "d√≥nde est√° el ba√±o", "pouvez-vous m'aider": "puedes ayudarme", "c'est combien": "cu√°nto cuesta", "aujourd'hui": "hoy", "demain": "ma√±ana", "hier": "ayer", "temps": "tiempo", "jour": "d√≠a", "nuit": "noche", "soleil": "sol", "lune": "luna", "√©toile": "estrella", "livre": "libro", "travail": "trabajo", "voiture": "coche", "rue": "calle", "ville": "ciudad", "pays": "pa√≠s", "argent": "dinero", "heureux": "feliz", "triste": "triste", "grand": "grande", "petit": "peque√±o", "chaud": "caliente", "froid": "fr√≠o", "nouveau": "nuevo", "vieux": "viejo", "bon": "bueno", "mauvais": "malo", "facile": "f√°cil", "difficile": "dif√≠cil", "droite": "derecha", "gauche": "izquierda", "pr√®s": "cerca", "loin": "lejos", "rapide": "r√°pido", "lent": "lento", "toujours": "siempre", "jamais": "nunca", "parfois": "a veces", "penser": "pensar", "savoir": "saber", "vouloir": "querer", "besoin": "necesitar", "aller": "ir", "venir": "venir", "voir": "ver", "regarder": "mirar", "√©couter": "escuchar", "parler": "hablar", "dire": "decir", "donner": "dar", "prendre": "tomar", "mettre": "poner", "obtenir": "conseguir", "faire": "hacer", "trouver": "encontrar", "essayer": "intentar"
      },
      "es_to_en": {
        "hola": "hello", "adi√≥s": "goodbye", "por favor": "please", "gracias": "thank you", "s√≠": "yes", "no": "no", "no entiendo": "i don't understand", "ayuda": "help", "comida": "food", "agua": "water", "casa": "house", "amigo": "friend", "familia": "family", "amor": "love", "paz": "peace", "guerra": "war", "computadora": "computer", "c√≥digo": "code", "error": "error", "√©xito": "success", "problema": "problem", "soluci√≥n": "solution", "abrir": "open", "cerrar": "close", "leer": "read", "escribir": "write", "traducir": "translate", "idioma": "language", "buenos d√≠as": "good morning", "buenas noches": "good night", "c√≥mo est√°s": "how are you", "c√≥mo te llamas": "what is your name", "d√≥nde est√° el ba√±o": "where is the bathroom", "puedes ayudarme": "can you help me", "cu√°nto cuesta": "how much does it cost", "hoy": "today", "ma√±ana": "tomorrow", "ayer": "yesterday", "tiempo": "time", "d√≠a": "day", "noche": "night", "sol": "sun", "luna": "moon", "estrella": "star", "libro": "book", "trabajo": "work", "coche": "car", "calle": "street", "ciudad": "city", "pa√≠s": "country", "dinero": "money", "feliz": "happy", "triste": "sad", "grande": "big", "peque√±o": "small", "caliente": "hot", "fr√≠o": "cold", "nuevo": "new", "viejo": "old", "bueno": "good", "malo": "bad", "f√°cil": "easy", "dif√≠cil": "difficult", "derecho/correcto": "right", "izquierda": "left", "cerca": "near", "lejos": "far", "r√°pido": "fast", "lento": "slow", "siempre": "always", "nunca": "never", "a veces": "sometimes", "pensar": "think", "saber": "know", "querer": "want", "necesitar": "need", "ir": "go", "venir": "come", "ver": "see", "mirar": "look", "escuchar": "listen", "hablar": "speak", "decir": "tell", "dar": "give", "tomar": "take", "poner": "put", "conseguir": "get", "hacer": "make", "encontrar": "find", "intentar": "try"
      },
      "es_to_fr": {
        "hola": "bonjour", "adi√≥s": "au revoir", "por favor": "s'il vous pla√Æt", "gracias": "merci", "s√≠": "oui", "no": "non", "no entiendo": "je ne comprends pas", "ayuda": "aide", "comida": "nourriture", "agua": "eau", "casa": "maison", "amigo": "ami", "familia": "famille", "amor": "amour", "paz": "paix", "guerra": "guerre", "computadora": "ordinateur", "c√≥digo": "code", "error": "erreur", "√©xito": "succ√®s", "problema": "probl√®me", "soluci√≥n": "solution", "abrir": "ouvrir", "cerrar": "fermer", "leer": "lire", "escribir": "√©crire", "traducir": "traduire", "idioma": "langue", "buenos d√≠as": "bonjour", "buenas noches": "bonne nuit", "c√≥mo est√°s": "comment allez-vous", "c√≥mo te llamas": "quel est ton nom", "d√≥nde est√° el ba√±o": "o√π sont les toilettes", "puedes ayudarme": "pouvez-vous m'aider", "cu√°nto cuesta": "c'est combien", "hoy": "aujourd'hui", "ma√±ana": "demain", "ayer": "hier", "tiempo": "temps", "d√≠a": "jour", "noche": "nuit", "sol": "soleil", "luna": "lune", "estrella": "√©toile", "libro": "livre", "trabajo": "travail", "coche": "voiture", "calle": "rue", "ciudad": "ville", "pa√≠s": "pays", "dinero": "argent", "feliz": "heureux", "triste": "triste", "grande": "grand", "peque√±o": "petit", "caliente": "chaud", "fr√≠o": "froid", "nuevo": "nouveau", "viejo": "vieux", "bueno": "bon", "malo": "mauvais", "f√°cil": "facile", "dif√≠cil": "difficile", "derecha": "droite", "izquierda": "gauche", "cerca": "pr√®s", "lejos": "loin", "r√°pido": "rapide", "lento": "lent", "siempre": "toujours", "nunca": "jamais", "a veces": "parfois", "pensar": "penser", "saber": "savoir", "querer": "vouloir", "necesitar": "avoir besoin de", "ir": "aller", "venir": "venir", "ver": "voir", "mirar": "regarder", "escuchar": "√©couter", "hablar": "parler", "decir": "dire", "dar": "donner", "tomar": "prendre", "poner": "mettre", "conseguir": "obtenir", "hacer": "faire", "encontrar": "trouver", "intentar": "essayer"
      }
    };
    // =================================================================


    // === L√ìGICA DE LA APLICACI√ìN (SIN CAMBIOS) ===
    let isProcessing = false;
    let currentMode = 'text';
    
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.tabs button').forEach(button => {
        button.addEventListener('click', () => setMode(button.getAttribute('data-mode')));
      });
      document.getElementById('swapBtn').addEventListener('click', swapLanguages);
      document.getElementById('output').addEventListener('click', (event) => {
        if (event.target.id === 'copyBtn') copyTranslation();
      });
      document.getElementById('imageBtn').addEventListener('click', () => document.getElementById('fileInput').click());
      document.getElementById('fileInput').addEventListener('change', handleImage);
      document.getElementById('voiceBtn').addEventListener('click', startVoice);
      document.getElementById('translateBtn').addEventListener('click', translateText);
      checkCompatibility();
    });
    
    function setMode(mode) {
      currentMode = mode;
      document.querySelectorAll('.tabs button').forEach(b => b.classList.remove('active'));
      document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
      document.querySelectorAll('[id^="mode-"]').forEach(el => el.classList.add('hidden'));
      document.getElementById('mode-' + mode).classList.remove('hidden');
      if (mode !== 'text') document.getElementById('inputText').value = '';
    }
    
    function getInputText() { return document.getElementById('inputText').value; }
    function setInputText(text) { document.getElementById('inputText').value = text; }
    
    function swapLanguages() {
      const sourceLang = document.getElementById('sourceLang');
      const targetLang = document.getElementById('targetLang');
      const temp = sourceLang.value;
      sourceLang.value = targetLang.value;
      targetLang.value = temp;
      const inputText = getInputText();
      const outputText = document.getElementById('output').textContent.replace('Copiar', '').trim();
      setInputText(outputText);
      document.getElementById('output').innerHTML = `<span style="color: var(--sub);">La traducci√≥n aparecer√° aqu√≠...</span>`;
    }
    
    function showNotification(message, type = 'info') {
      const notification = document.getElementById('notification');
      notification.textContent = message;
      notification.className = `notification ${type} show`;
      setTimeout(() => notification.classList.remove('show'), 3000);
    }
    
    function showLoader(elementId) { document.getElementById(elementId).classList.remove('hidden'); }
    function hideLoader(elementId) { document.getElementById(elementId).classList.add('hidden'); }
    
    function checkCompatibility() {
      if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
        document.getElementById('voiceBtn').disabled = true;
        showNotification('Reconocimiento de voz no compatible.', 'error');
      }
    }

    function translateText() {
      if (isProcessing) return;
      const text = getInputText();
      if (!text) return showNotification('No hay texto para traducir', 'error');

      isProcessing = true;
      document.getElementById('translateBtn').disabled = true;
      document.getElementById('translateBtn').innerHTML = '<div class="loader"></div>Traduciendo...';

      const sourceLang = document.getElementById('sourceLang').value;
      const targetLang = document.getElementById('targetLang').value;
      
      const dictKey = `${sourceLang}_to_${targetLang}`;
      const currentDict = dictionary[dictKey];

      if (!currentDict) {
        showNotification(`Traducci√≥n de ${sourceLang} a ${targetLang} no configurada.`, 'error');
        isProcessing = false;
        document.getElementById('translateBtn').disabled = false;
        document.getElementById('translateBtn').innerHTML = 'Traducir';
        return;
      }
      
      const words = text.toLowerCase().split(/\s+/);
      const translatedWords = words.map(word => {
        const cleanWord = word.replace(/[.,!?;:]/g, '');
        const translation = currentDict[cleanWord];
        return translation || word;
      });
      
      const translatedText = translatedWords.join(' ');
      
      const outputElement = document.getElementById('output');
      outputElement.innerHTML = `${translatedText}<button class="copy-btn" id="copyBtn">Copiar</button>`;
      
      showNotification('Traducci√≥n completada', 'success');
      
      isProcessing = false;
      document.getElementById('translateBtn').disabled = false;
      document.getElementById('translateBtn').innerHTML = 'Traducir';
    }

    function startVoice() {
      if (isProcessing) return;
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) return showNotification('Reconocimiento de voz no compatible', 'error');
      
      const recognition = new SpeechRecognition();
      const sourceLang = document.getElementById('sourceLang').value;
      recognition.lang = sourceLang === 'en' ? 'en-US' : sourceLang === 'fr' ? 'fr-FR' : 'es-ES';
      recognition.continuous = false; recognition.interimResults = false;
      
      recognition.onstart = () => { isProcessing = true; showLoader('voiceStatus'); document.getElementById('voiceBtn').disabled = true; };
      recognition.onresult = (event) => { setInputText(event.results[0][0].transcript); showNotification('Texto reconocido', 'success'); };
      recognition.onerror = (event) => { showNotification(`Error de reconocimiento: ${event.error}`, 'error'); };
      recognition.onend = () => { isProcessing = false; hideLoader('voiceStatus'); document.getElementById('voiceBtn').disabled = false; };
      recognition.start();
    }
    
    async function handleImage(event) {
      if (isProcessing) return;
      const file = event.target.files[0]; if (!file) return;
      const reader = new FileReader();
      reader.onload = (e) => { document.getElementById('imagePreview').innerHTML = `<img src="${e.target.result}" class="preview-image" alt="Preview">`; };
      reader.readAsDataURL(file);
      
      isProcessing = true; showLoader('imageStatus'); document.getElementById('imageBtn').disabled = true;
      try {
        const sourceLang = document.getElementById('sourceLang').value;
        const languages = sourceLang === 'en' ? 'eng' : sourceLang === 'fr' ? 'fra' : 'spa';
        const result = await Tesseract.recognize(file, languages);
        const recognizedText = result.data.text.trim();
        if (!recognizedText) { showNotification('No se encontr√≥ texto en la imagen', 'error'); return; }
        setInputText(recognizedText);
        showNotification('Texto reconocido correctamente', 'success');
        await translateText();
      } catch (error) { console.error('OCR error:', error); showNotification('Error al procesar la imagen', 'error'); }
      finally { isProcessing = false; hideLoader('imageStatus'); document.getElementById('imageBtn').disabled = false; }
    }
    
    function copyTranslation() {
      const textToCopy = document.getElementById('output').childNodes[0].textContent.trim();
      navigator.clipboard.writeText(textToCopy).then(() => showNotification('Texto copiado', 'success')).catch(() => showNotification('Error al copiar', 'error'));
    }
  </script>
</body>
</html>
